{"version":3,"sources":["EnemySwing.js"],"names":["cc","Class","extends","require","properties","swingDuration","rotateDuration","targetPosX","targetPosY","start","director","getCollisionManager","enabled","swingAction","setSwingAction","node","runAction","rotation","Math","atan","PI","swingUp","moveBy","v2","easing","easeCubicActionInOut","rotate","rotateBy","swingDown","repeatForever","sequence"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACPC,WAASC,QAAQ,OAAR,CADF;;AAGPC,cAAY;AACVC,mBAAe,CADL,EACQ;AAClBC,oBAAgB,CAFN,EAES;AACnBC,gBAAY,CAHF,EAGK;AACfC,gBAAY;AAJF,GAHL;;AAUP;;AAEA;;AAEA;;;;AAIAC,OAlBO,mBAkBE;AACPT,OAAGU,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;;AAEA,SAAKC,WAAL,GAAmB,KAAKC,cAAL,EAAnB;AACA,SAAKC,IAAL,CAAUC,SAAV,CAAoB,KAAKH,WAAzB;AACD,GAvBM;;;AAyBP;;;;AAIAC,gBA7BO,4BA6BW;AAChB,QAAI,KAAKP,UAAL,KAAoB,CAAxB,EAA2B;AACzB,WAAKA,UAAL,GAAkB,CAAlB;AACD;AACD,SAAKQ,IAAL,CAAUE,QAAV,GAAqB,KAAK,MAAMC,KAAKC,IAAL,CAAU,KAAKX,UAAL,GAAkB,KAAKD,UAAjC,CAAN,GAAqDW,KAAKE,EAApF;;AAEA,QAAIC,UAAUrB,GAAGsB,MAAH,CAAU,KAAKjB,aAAf,EAA8BL,GAAGuB,EAAH,CAAM,KAAKhB,UAAX,EAAuB,KAAKC,UAA5B,CAA9B,EAAuEgB,MAAvE,CAA8ExB,GAAGyB,oBAAH,EAA9E,CAAd;AACA,QAAIC,SAAS1B,GAAG2B,QAAH,CAAY,KAAKrB,cAAjB,EAAiC,GAAjC,CAAb;AACA,QAAIsB,YAAY5B,GAAGsB,MAAH,CAAU,KAAKjB,aAAf,EAA8BL,GAAGuB,EAAH,CAAM,CAAC,KAAKhB,UAAZ,EAAwB,CAAC,KAAKC,UAA9B,CAA9B,EAAyEgB,MAAzE,CAAgFxB,GAAGyB,oBAAH,EAAhF,CAAhB;AACA;AACA,WAAOzB,GAAG6B,aAAH,CAAiB7B,GAAG8B,QAAH,CAAYT,OAAZ,EAAqBK,MAArB,EAA6BE,SAA7B,EAAwCF,MAAxC,CAAjB,CAAP;AACD;;AAED;;AA1CO,CAAT","file":"EnemySwing.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["/*\n * 摆动敌人脚本\n */\n\ncc.Class({\n  extends: require('Enemy'),\n\n  properties: {\n    swingDuration: 0, // 摆动周期\n    rotateDuration: 0, // 旋转周期\n    targetPosX: 0, // 目标点位置\n    targetPosY: 0\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  // onLoad () {},\n\n  /*\n     * 初始化函数\n     * 功能：初始化脚本所需的设定\n     */\n  start () {\n    cc.director.getCollisionManager().enabled = true\n\n    this.swingAction = this.setSwingAction()\n    this.node.runAction(this.swingAction)\n  },\n\n  /*\n     * 设置摆动行为函数\n     * 功能：给对象设定一个按目标位置摆动的行为\n     */\n  setSwingAction () {\n    if (this.targetPosX === 0) {\n      this.targetPosX = 1\n    }\n    this.node.rotation = 90 - 180 * Math.atan(this.targetPosY / this.targetPosX) / Math.PI\n\n    var swingUp = cc.moveBy(this.swingDuration, cc.v2(this.targetPosX, this.targetPosY)).easing(cc.easeCubicActionInOut())\n    var rotate = cc.rotateBy(this.rotateDuration, 180)\n    var swingDown = cc.moveBy(this.swingDuration, cc.v2(-this.targetPosX, -this.targetPosY)).easing(cc.easeCubicActionInOut())\n    // 不断重复\n    return cc.repeatForever(cc.sequence(swingUp, rotate, swingDown, rotate))\n  }\n\n  // update (dt) {},\n})\n"]}