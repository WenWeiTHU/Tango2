{"version":3,"sources":["Enemy.js"],"names":["cc","Class","extends","Component","properties","accel","speedX","speedY","rotationUpdate","BlastPrefab","type","Prefab","default","Explode","AudioSource","rotate","newDegree","node","rotation","Math","PI","onLoad","director","getCollisionManager","enabled","start","onCollisionEnter","other","self","group","play","blast","instantiate","parent","addChild","setPosition","x","y","animComponent","getComponent","Animation","destroy","updatePos","dt","update"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,WAAO,CADG,EACA;AACVC,YAAQ,CAFE,EAEC;AACXC,YAAQ,CAHE,EAGC;AACXC,oBAAgB,EAJN,EAIU;AACpBC,iBAAa;AACXC,YAAMV,GAAGW,MADE;AAEXC,eAAS;AAFE,KALH;AASVC,aAAS;AACPH,YAAMV,GAAGc,WADF;AAEPF,eAAS;AAFF;AATC,GAHL;;AAkBP;;;;AAIAG,QAtBO,oBAsBG;AACR,QAAIC,YAAY,KAAKC,IAAL,CAAUC,QAAV,GAAsB,KAAKV,cAAL,GAAsBW,KAAKC,EAAjE;AACA,SAAKH,IAAL,CAAUC,QAAV,GAAqBF,YAAY,GAAZ,GAAkBA,YAAY,GAA9B,GAAoCA,SAAzD;AACD,GAzBM;;;AA2BP;;AAEA;;;;AAIAK,QAjCO,oBAiCG;AACRrB,OAAGsB,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACD,GAnCM;AAqCPC,OArCO,mBAqCE,CAAE,CArCJ;;;AAuCP;;;;AAIAC,kBA3CO,4BA2CWC,KA3CX,EA2CkBC,IA3ClB,EA2CwB;AAC7B;AACA,QAAID,MAAMV,IAAN,CAAWY,KAAX,KAAqB,KAAzB,EAAgC;AAC9B,WAAKvB,MAAL,IAAe,CAAC,CAAhB;AACA,WAAKC,MAAL,IAAe,CAAC,CAAhB;AACD,KAHD,MAGO;AACL;AACA,WAAKM,OAAL,CAAaiB,IAAb;;AAEA,UAAIC,QAAQ/B,GAAGgC,WAAH,CAAe,KAAKvB,WAApB,CAAZ;;AAEA,WAAKQ,IAAL,CAAUgB,MAAV,CAAiBC,QAAjB,CAA0BH,KAA1B;AACAA,YAAMI,WAAN,CAAkB,KAAKlB,IAAL,CAAUmB,CAA5B,EAA+B,KAAKnB,IAAL,CAAUoB,CAAzC;AACA,UAAIC,gBAAgBP,MAAMQ,YAAN,CAAmBvC,GAAGwC,SAAtB,CAApB;AACAF,oBAAcR,IAAd,CAAmB,QAAnB;AACA,WAAKb,IAAL,CAAUwB,OAAV;AACD;AACF,GA5DM;;;AA8DP;;;;AAIAC,WAlEO,qBAkEIC,EAlEJ,EAkEQ;AACb,SAAK1B,IAAL,CAAUmB,CAAV,IAAe,KAAK9B,MAAL,GAAcqC,EAA7B;AACA,SAAK1B,IAAL,CAAUoB,CAAV,IAAe,KAAK9B,MAAL,GAAcoC,EAA7B;AACD,GArEM;;;AAuEP;AACAC,QAxEO,kBAwECD,EAxED,EAwEK;AACV,SAAK5B,MAAL;AACA,SAAK2B,SAAL,CAAeC,EAAf;AACD;AA3EM,CAAT","file":"Enemy.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["/*\n * 普通敌机脚本\n */\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    accel: 0, // 敌机加速度\n    speedX: 0, // 敌机X方向速度\n    speedY: 0, // 敌机Y方向速度\n    rotationUpdate: 20, // 敌机自转时长\n    BlastPrefab: {\n      type: cc.Prefab,\n      default: null\n    },\n    Explode: {\n      type: cc.AudioSource,\n      default: null\n    }\n  },\n\n  /*\n     * 自转函数\n     * 功能：更新对象的旋转角度，使其发生旋转\n     */\n  rotate () {\n    var newDegree = this.node.rotation + (this.rotationUpdate / Math.PI)\n    this.node.rotation = newDegree > 360 ? newDegree - 360 : newDegree\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  /*\n     * 初始化函数\n     * 功能：初始化脚本运行所需的参数\n     */\n  onLoad () {\n    cc.director.getCollisionManager().enabled = true\n  },\n\n  start () {},\n\n  /*\n     * 碰撞函数\n     * 功能：在发生碰撞时对对象进行处理\n     */\n  onCollisionEnter (other, self) {\n    // 直接回弹\n    if (other.node.group === 'Map') {\n      this.speedX *= -1\n      this.speedY *= -1\n    } else {\n      // 碰撞主角,链接,护盾则爆炸\n      this.Explode.play()\n\n      var blast = cc.instantiate(this.BlastPrefab)\n\n      this.node.parent.addChild(blast)\n      blast.setPosition(this.node.x, this.node.y)\n      var animComponent = blast.getComponent(cc.Animation)\n      animComponent.play('blast3')\n      this.node.destroy()\n    }\n  },\n\n  /*\n     * 更新位置函数\n     * 根据 X 轴和 Y 轴的分速度来更新对象的位置\n     */\n  updatePos (dt) {\n    this.node.x += this.speedX * dt\n    this.node.y += this.speedY * dt\n  },\n\n  // 位置更新\n  update (dt) {\n    this.rotate()\n    this.updatePos(dt)\n  }\n})\n"]}