{"version":3,"sources":["Bullet.js"],"names":["cc","Class","extends","Component","properties","direction","speed","BulletBreakPrefab","type","Prefab","default","onLoad","director","getCollisionManager","enabled","setDirection","start","directionX","x","mag","directionY","y","onCollisionEnter","other","self","blast","instantiate","node","parent","addChild","setPosition","animComponent","getComponent","Animation","play","destroy","updatePos","dt","update"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,eAAW,CADD;AAEVC,WAAO,CAFG,EAEA;AACVC,uBAAmB;AACjBC,YAAMR,GAAGS,MADQ;AAEjBC,eAAS;AAFQ;AAHT,GAHL;;AAYP;;;;AAIAC,QAhBO,oBAgBG;AACRX,OAAGY,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACA,SAAKC,YAAL;AACD,GAnBM;AAqBPC,OArBO,mBAqBE,CAAE,CArBJ;;;AAuBP;;;;AAIAD,cA3BO,0BA2BS;AACd,QAAI,KAAKV,SAAL,KAAmB,CAAvB,EAA0B;AACxB;AACD;AACD,SAAKY,UAAL,GAAkB,KAAKZ,SAAL,CAAea,CAAf,GAAmB,KAAKb,SAAL,CAAec,GAAf,EAArC;AACA,SAAKC,UAAL,GAAkB,KAAKf,SAAL,CAAegB,CAAf,GAAmB,KAAKhB,SAAL,CAAec,GAAf,EAArC;AACD,GAjCM;;;AAmCP;;;;AAIAG,kBAvCO,4BAuCWC,KAvCX,EAuCkBC,IAvClB,EAuCwB;AAC7B;AACA,QAAIC,QAAQzB,GAAG0B,WAAH,CAAe,KAAKnB,iBAApB,CAAZ;AACA,SAAKoB,IAAL,CAAUC,MAAV,CAAiBC,QAAjB,CAA0BJ,KAA1B;AACAA,UAAMK,WAAN,CAAkB,KAAKH,IAAL,CAAUT,CAA5B,EAA+B,KAAKS,IAAL,CAAUN,CAAzC;AACA,QAAIU,gBAAgBN,MAAMO,YAAN,CAAmBhC,GAAGiC,SAAtB,CAApB;AACAF,kBAAcG,IAAd,CAAmB,aAAnB;;AAEA;AACA,SAAKP,IAAL,CAAUQ,OAAV;AACD,GAjDM;;;AAmDP;;;;AAIAC,WAvDO,qBAuDIC,EAvDJ,EAuDQ;AACb,SAAKV,IAAL,CAAUT,CAAV,IAAe,KAAKZ,KAAL,GAAa,KAAKW,UAAlB,GAA+BoB,EAA9C;AACA,SAAKV,IAAL,CAAUN,CAAV,IAAe,KAAKf,KAAL,GAAa,KAAKc,UAAlB,GAA+BiB,EAA9C;AACD,GA1DM;;;AA4DP;AACAC,QA7DO,kBA6DCD,EA7DD,EA6DK;AACV,SAAKD,SAAL,CAAeC,EAAf;AACD;AA/DM,CAAT","file":"Bullet.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["/*\n * 子弹运行脚本\n */\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    direction: 0,\n    speed: 0, // 子弹速度\n    BulletBreakPrefab: {\n      type: cc.Prefab,\n      default: null\n    }\n  },\n\n  /*\n     * 初始化函数\n     * 功能：初始化子弹运行所需要的设置\n     */\n  onLoad () {\n    cc.director.getCollisionManager().enabled = true\n    this.setDirection()\n  },\n\n  start () {},\n\n  /*\n     * 设置方向函数\n     * 功能：设置子弹飞行的方向\n     */\n  setDirection () {\n    if (this.direction === 0) {\n      return\n    }\n    this.directionX = this.direction.x / this.direction.mag()\n    this.directionY = this.direction.y / this.direction.mag()\n  },\n\n  /*\n     * 碰撞函数\n     * 功能：发生碰撞时调用，当发生碰撞时，产生一个动画效果，并销毁节点本身\n     */\n  onCollisionEnter (other, self) {\n    // 实例化动画并设置其参数\n    var blast = cc.instantiate(this.BulletBreakPrefab)\n    this.node.parent.addChild(blast)\n    blast.setPosition(this.node.x, this.node.y)\n    var animComponent = blast.getComponent(cc.Animation)\n    animComponent.play('bulletBreak')\n\n    // 销毁自身节点\n    this.node.destroy()\n  },\n\n  /*\n     * 更新位置函数\n     * 功能：根据方向和时间更新节点的下一个位置\n     */\n  updatePos (dt) {\n    this.node.x += this.speed * this.directionX * dt\n    this.node.y += this.speed * this.directionY * dt\n  },\n\n  // 每帧更新时系统调用的更新函数\n  update (dt) {\n    this.updatePos(dt)\n  }\n})\n"]}