{"version":3,"sources":["Transition.js"],"names":["cc","Class","extends","Component","properties","continueBtn","type","Button","default","homeBtn","onLoad","node","on","loadBeginMenu","loadContinue","sceneName","director","getScene","name","score","sys","localStorage","getItem","getChildByName","getComponent","Label","string","loadScene","s","JSON","parse","Stage","temp","Number","slice","length","sceneID","isNaN","Win","newSceneName","String","_loadingScene"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,iBAAa;AACXC,YAAMN,GAAGO,MADE;AAEXC,eAAS;AAFE,KADH;AAKVC,aAAS;AACPH,YAAMN,GAAGO,MADF;AAEPC,eAAS;AAFF;AALC,GAHL;;AAcP;AACA;AACAE,QAhBO,oBAgBG;AACR,SAAKD,OAAL,CAAaE,IAAb,CAAkBC,EAAlB,CAAqB,OAArB,EAA8B,KAAKC,aAAnC,EAAkD,IAAlD;AACA,SAAKR,WAAL,CAAiBM,IAAjB,CAAsBC,EAAtB,CAAyB,OAAzB,EAAkC,KAAKE,YAAvC,EAAqD,IAArD;AACA,QAAIC,YAAYf,GAAGgB,QAAH,CAAYC,QAAZ,GAAuBC,IAAvC;AACA,QAAIH,cAAc,gBAAlB,EAAoC;AAClC,UAAII,QAAQnB,GAAGoB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAAZ;AACA,WAAKX,IAAL,CAAUY,cAAV,CAAyB,OAAzB,EAAkCC,YAAlC,CAA+CxB,GAAGyB,KAAlD,EAAyDC,MAAzD,GAAkE,mBAAmBP,KAAnB,GAA2B,GAA7F;AACA,WAAKR,IAAL,CAAUY,cAAV,CAAyB,SAAzB,EAAoCX,EAApC,CAAuC,OAAvC,EAAgD,YAAM;AACpDZ,WAAGgB,QAAH,CAAYW,SAAZ,CAAsB,SAAtB;AACD,OAFD,EAEG,IAFH;AAGD;AACF,GA3BM;;;AA6BP;AACAd,eA9BO,2BA8BU;AACfb,OAAGgB,QAAH,CAAYW,SAAZ,CAAsB,WAAtB;AACD,GAhCM;;;AAkCP;AACA;AACA;AACAb,cArCO,0BAqCS;AACd,QAAIc,IAAI5B,GAAGoB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAR;AACAM,QAAIC,KAAKC,KAAL,CAAWF,CAAX,CAAJ;AACA,QAAIA,EAAEG,KAAF,KAAY,cAAhB,EAAgC;AAC9B/B,SAAGgB,QAAH,CAAYW,SAAZ,CAAsB,cAAtB;AACA;AACD;AACD,QAAIK,OAAOC,OAAOL,EAAEG,KAAF,CAAQG,KAAR,CAAcN,EAAEG,KAAF,CAAQI,MAAR,GAAiB,CAA/B,CAAP,CAAX;AACA,QAAIC,UAAUC,MAAML,IAAN,IAAcC,OAAOL,EAAEG,KAAF,CAAQH,EAAEG,KAAF,CAAQI,MAAR,GAAiB,CAAzB,CAAP,CAAd,GAAoDH,IAAlE;AACAI,cAAUR,EAAEU,GAAF,GAAQF,UAAU,CAAlB,GAAsBA,OAAhC;AACA,QAAIG,eAAe,UAAUC,OAAOJ,OAAP,CAA7B;AACA,QAAIrB,YAAYf,GAAGgB,QAAH,CAAYyB,aAA5B;AACA,QAAI1B,cAAcwB,YAAlB,EAAgC;AAC9BvC,SAAGgB,QAAH,CAAYW,SAAZ,CAAsBY,YAAtB;AACD;AACF;;AAED;;AAtDO,CAAT","file":"Transition.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["/*\n * 过渡界面脚本\n */\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    continueBtn: {\n      type: cc.Button,\n      default: null\n    },\n    homeBtn: {\n      type: cc.Button,\n      default: null\n    }\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n  // 按钮回调绑定\n  onLoad () {\n    this.homeBtn.node.on('click', this.loadBeginMenu, this)\n    this.continueBtn.node.on('click', this.loadContinue, this)\n    var sceneName = cc.director.getScene().name\n    if (sceneName === 'Transition_INF') {\n      var score = cc.sys.localStorage.getItem('SurviveScore')\n      this.node.getChildByName('Score').getComponent(cc.Label).string = 'SurvivalTime: ' + score + 's'\n      this.node.getChildByName('rankBtn').on('click', () => {\n        cc.director.loadScene('Ranking')\n      }, this)\n    }\n  },\n\n  // 加载开始界面\n  loadBeginMenu () {\n    cc.director.loadScene('beginMenu')\n  },\n\n  // 加载继续界面\n  // 若过关，则直接进入下一关卡\n  // 若失败，则继续本关\n  loadContinue () {\n    var s = cc.sys.localStorage.getItem('lastStage')\n    s = JSON.parse(s)\n    if (s.Stage === 'Infinity War') {\n      cc.director.loadScene('Infinity War')\n      return\n    }\n    var temp = Number(s.Stage.slice(s.Stage.length - 2))\n    var sceneID = isNaN(temp) ? Number(s.Stage[s.Stage.length - 1]) : temp\n    sceneID = s.Win ? sceneID + 1 : sceneID\n    var newSceneName = 'Stage' + String(sceneID)\n    var sceneName = cc.director._loadingScene\n    if (sceneName !== newSceneName) {\n      cc.director.loadScene(newSceneName)\n    }\n  }\n\n  // update (dt) {},\n})\n"]}