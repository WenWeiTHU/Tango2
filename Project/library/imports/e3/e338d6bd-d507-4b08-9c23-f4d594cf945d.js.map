{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\Game/assets\\scripts\\Game\\Target.js"],"names":["cc","Class","extends","Component","properties","bonus","type","AudioSource","default","win","onLoad","director","getCollisionManager","enabled","start","onCollisionEnter","other","self","node","group","play","writeResult","sceneName","getScene","name","data","Stage","Win","sys","localStorage","setItem","JSON","stringify","temp","Number","slice","length","number","isNaN","String","update","dt","rotation"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,WAAO;AACLC,YAAMN,GAAGO,WADJ;AAELC,eAAS;AAFJ,KADG;AAKVC,SAAK;AALK,GAHL;;AAWP;;AAEAC,QAbO,oBAaG;AACRV,OAAGW,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACD,GAfM;AAiBPC,OAjBO,mBAiBE,CAER,CAnBM;AAqBPC,kBArBO,4BAqBWC,KArBX,EAqBkBC,IArBlB,EAqBwB;AAC7B,QAAID,MAAME,IAAN,CAAWC,KAAX,KAAqB,QAAzB,EAAmC;AACjC,WAAKd,KAAL,CAAWe,IAAX;AACA;AACA,WAAKC,WAAL;AACA,WAAKZ,GAAL,GAAW,IAAX;AACD;AACF,GA5BM;;;AA8BP;AACAY,aA/BO,yBA+BQ;AACb,QAAIC,YAAYtB,GAAGW,QAAH,CAAYY,QAAZ,GAAuBC,IAAvC;AACA,QAAIC,OAAO;AACTC,aAAOJ,SADE;AAETK,WAAK;AAFI,KAAX;AAIA3B,OAAG4B,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,EAAyCC,KAAKC,SAAL,CAAeP,IAAf,CAAzC;AACA,QAAIQ,OAAOC,OAAOZ,UAAUa,KAAV,CAAgBb,UAAUc,MAAV,GAAmB,CAAnC,CAAP,CAAX;AACA,QAAIC,SAASC,MAAML,IAAN,IAAcC,OAAOZ,UAAUA,UAAUc,MAAV,GAAmB,CAA7B,CAAP,IAA0C,CAAxD,GAA4DH,OAAO,CAAhF;AACAX,gBAAY,UAAUiB,OAAOF,MAAP,CAAtB;AACArC,OAAG4B,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4BR,SAA5B,EAAuC,IAAvC;AACD,GA1CM;;;AA4CP;AACAkB,QA7CO,kBA6CCC,EA7CD,EA6CK;AACV,SAAKvB,IAAL,CAAUwB,QAAV,IAAsB,CAAtB;AACD;AA/CM,CAAT","file":"Target.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["/*\n * 目标点自身运动控制脚本\n */\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    bonus: {\n      type: cc.AudioSource,\n      default: null\n    },\n    win: false\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad () {\n    cc.director.getCollisionManager().enabled = true\n  },\n\n  start () {\n\n  },\n\n  onCollisionEnter (other, self) {\n    if (other.node.group === 'Player') {\n      this.bonus.play()\n      // 加载场景\n      this.writeResult()\n      this.win = true\n    }\n  },\n\n  // 将游戏存档信息写入本地存储\n  writeResult () {\n    var sceneName = cc.director.getScene().name\n    var data = {\n      Stage: sceneName,\n      Win: true\n    }\n    cc.sys.localStorage.setItem('lastStage', JSON.stringify(data))\n    var temp = Number(sceneName.slice(sceneName.length - 2))\n    var number = isNaN(temp) ? Number(sceneName[sceneName.length - 1]) + 1 : temp + 1\n    sceneName = 'Stage' + String(number)\n    cc.sys.localStorage.setItem(sceneName, true)\n  },\n\n  // 自身运动(旋转)更新\n  update (dt) {\n    this.node.rotation += 1\n  }\n})\n"]}