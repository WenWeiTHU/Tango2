{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\StartMenu/assets\\scripts\\StartMenu\\Menu.js"],"names":["cc","Class","extends","Component","properties","player1","type","Node","default","player2","startBtn","Button","helpBtn","bindR","bindL","enemyStatic","enemySpin","BlastPrefab1","Prefab","BlastPrefab2","enemySwing1","enemySwing2","bgm","AudioClip","onLoad","audioEngine","isMusicPlaying","playMusic","setBtn","setLocalStorage","initUI","sys","localStorage","length","setItem","i","String","JSON","stringify","test","getItem","spinDegree","bindAnimComponent","getComponent","Animation","bindAnimState","play","wrapMode","WrapMode","Loop","bindAnimComponent2","bindAnimState2","swingRight","moveBy","v2","x","easing","easeCubicActionInOut","rotate1","rotateBy","rotate2","swingLeft","runAction","repeatForever","sequence","schedule","explosion","node","on","sceneName","director","_loadingScene","loadScene","startClick","getScene","name","blast","instantiate","addChild","setPosition","y","animComponent","blast2","animComponent2","start","updateRotatation","newDegree","rotation","Math","PI","sin","cos","update","dt"],"mappings":"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","file":"Menu.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\StartMenu","sourcesContent":["/*\n * 开始菜单脚本\n */\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    player1: {\n      type: cc.Node,\n      default: null\n    },\n    player2: {\n      type: cc.Node,\n      default: null\n    },\n    startBtn: {\n      type: cc.Button,\n      default: null\n    },\n    helpBtn: {\n      type: cc.Button,\n      default: null\n    },\n    bindR: {\n      type: cc.Node,\n      default: null\n    },\n    bindL: {\n      type: cc.Node,\n      default: null\n    },\n    enemyStatic: {\n      type: cc.Node,\n      default: null\n    },\n    enemySpin: {\n      type: cc.Node,\n      default: null\n    },\n    BlastPrefab1: {\n      type: cc.Prefab,\n      default: null\n    },\n    BlastPrefab2: {\n      type: cc.Prefab,\n      default: null\n    },\n    enemySwing1: {\n      type: cc.Node,\n      default: null\n    },\n    enemySwing2: {\n      type: cc.Node,\n      default: null\n    },\n    bgm: {\n      type: cc.AudioClip,\n      default: null\n    }\n  },\n\n  /*\n     * 初始化函数\n     * 功能：初始化脚本所需设定\n     */\n  onLoad () {\n    if (!cc.audioEngine.isMusicPlaying()) {\n      cc.audioEngine.playMusic(this.bgm, true)\n    }\n    this.setBtn()\n    this.setLocalStorage()\n    this.initUI()\n  },\n\n  /*\n     * 检查本地储存函数\n     * 功能：检查本地储存，并设定本地储存\n     */\n  setLocalStorage () {\n    if (cc.sys.localStorage.length <= 1) {\n      cc.sys.localStorage.setItem('Stage1', true)\n      for (var i = 2; i < 13; ++i) {\n        cc.sys.localStorage.setItem('Stage' + String(i), false)\n      }\n      cc.sys.localStorage.setItem('highestScore', 0)\n      cc.sys.localStorage.setItem('ranking', JSON.stringify([]))\n    }\n    var test = cc.sys.localStorage.getItem('ranking')\n    if (test === null || test === '') {\n      cc.sys.localStorage.setItem('ranking', JSON.stringify([]))\n    }\n  },\n\n  /*\n     * 初始化UI函数\n     * 功能：初始化开始界面中的动画UI\n     */\n  initUI () {\n    this.spinDegree = 0\n\n    var bindAnimComponent = this.bindR.getComponent(cc.Animation)\n    var bindAnimState = bindAnimComponent.play('bindAnim2')\n    bindAnimState.wrapMode = cc.WrapMode.Loop\n\n    var bindAnimComponent2 = this.bindL.getComponent(cc.Animation)\n    var bindAnimState2 = bindAnimComponent2.play('bindAnim2')\n    bindAnimState2.wrapMode = cc.WrapMode.Loop\n\n    var swingRight = cc.moveBy(2.0, cc.v2(this.enemySwing2.x - this.enemySwing1.x, 0)).easing(cc.easeCubicActionInOut())\n    var rotate1 = cc.rotateBy(1.0, 180)\n    var rotate2 = cc.rotateBy(1.0, -180)\n    var swingLeft = cc.moveBy(2.0, cc.v2(this.enemySwing1.x - this.enemySwing2.x, 0)).easing(cc.easeCubicActionInOut())\n    // 不断重复\n    this.enemySwing1.runAction(cc.repeatForever(cc.sequence(swingRight, rotate1, swingLeft, rotate2)))\n    this.enemySwing2.runAction(cc.repeatForever(cc.sequence(swingLeft, rotate2, swingRight, rotate1)))\n\n    this.schedule(this.explosion, 3)\n  },\n\n  /*\n     * 初始化按键函数\n     * 功能：初始化按钮的回调函数\n     */\n  setBtn () {\n    this.startBtn.node.on('click', function () {\n      var sceneName = cc.director._loadingScene\n      if (sceneName !== 'Selection') {\n        cc.director.loadScene('Selection')\n      }\n    }, this)\n    this.helpBtn.node.on('click', function () {\n      var sceneName = cc.director._loadingScene\n      if (sceneName !== 'Help') {\n        cc.director.loadScene('Help')\n      }\n    }, this)\n  },\n\n  /*\n     * 开始函数\n     * 功能：当开始按键被按下时，加载下一个场景\n     */\n  startClick () {\n    var sceneName = cc.director.getScene().name\n    if (sceneName !== 'Selection') {\n      cc.director.loadScene('Selection')\n    }\n  },\n\n  /*\n     * 爆炸函数\n     * 功能：设置动画中的爆炸效果\n     */\n  explosion () {\n    const blast = cc.instantiate(this.BlastPrefab1)\n    this.node.addChild(blast)\n    blast.setPosition(this.player1.x, this.player1.y)\n    const animComponent = blast.getComponent(cc.Animation)\n    animComponent.play('blast1')\n\n    const blast2 = cc.instantiate(this.BlastPrefab2)\n    this.node.addChild(blast2)\n    blast2.setPosition(this.player2.x, this.player2.y)\n    const animComponent2 = blast2.getComponent(cc.Animation)\n    animComponent2.play('blast2')\n  },\n\n  start () {},\n\n  /*\n     * 更新旋转函数\n     * 功能：使UI动画中的对象发生旋转\n     */\n  updateRotatation () {\n    var newDegree = this.enemyStatic.rotation + (10 / Math.PI)\n    this.enemyStatic.rotation = newDegree > 360 ? newDegree - 360 : newDegree\n    this.enemySpin.rotation = newDegree > 360 ? newDegree - 360 : newDegree\n\n    this.spinDegree += 0.3\n    this.spinDegree = this.spinDegree > 360 ? this.spinDegree - 360 : this.spinDegree\n    this.enemySpin.x = this.enemyStatic.x + 135 * Math.sin(this.spinDegree * Math.PI / 180)\n    this.enemySpin.y = this.enemyStatic.y + 135 * Math.cos(this.spinDegree * Math.PI / 180)\n  },\n\n  // 系统调用的更新函数\n  update (dt) {\n    this.updateRotatation()\n  }\n})\n"]}