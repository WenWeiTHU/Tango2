{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\Game/assets\\scripts\\Game\\Bind.js"],"names":["cc","Class","extends","Component","properties","Player1","type","Node","default","Player2","onLoad","director","getCollisionManager","enabled","animComponent","getComponent","Animation","animState","play","wrapMode","WrapMode","Loop","start","dir","v2","x","y","r","Math","atan2","degree","PI","node","rotation","height","mag","update","dt","collider","_components","points"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,aAAS;AACPC,YAAMN,GAAGO,IADF;AAEPC,eAAS;AAFF,KADC;;AAMVC,aAAS;AACPH,YAAMN,GAAGO,IADF;AAEPC,eAAS;AAFF;AANC,GAHL;;AAeP;;AAEA;AACAE,QAlBO,oBAkBG;AACRV,OAAGW,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACA,QAAIC,gBAAgB,KAAKC,YAAL,CAAkBf,GAAGgB,SAArB,CAApB;AACA,QAAIC,YAAYH,cAAcI,IAAd,CAAmB,WAAnB,CAAhB;AACAD,cAAUE,QAAV,GAAqBnB,GAAGoB,QAAH,CAAYC,IAAjC;AACD,GAvBM;;;AAyBP;AACAC,OA1BO,mBA0BE;AACP,SAAKC,GAAL,GAAWvB,GAAGwB,EAAH,CAAM,KAAKnB,OAAL,CAAaoB,CAAb,GAAiB,KAAKhB,OAAL,CAAagB,CAApC,EAAuC,KAAKpB,OAAL,CAAaqB,CAAb,GAAiB,KAAKjB,OAAL,CAAaiB,CAArE,CAAX;AACA,QAAIC,IAAIC,KAAKC,KAAL,CAAW,KAAKN,GAAL,CAASG,CAApB,EAAuB,KAAKH,GAAL,CAASE,CAAhC,CAAR;AACA,QAAIK,SAASH,IAAI,GAAJ,GAAWC,KAAKG,EAA7B;AACAD,aAAS,MAAMA,MAAN,GAAe,EAAxB;AACA,SAAKE,IAAL,CAAUC,QAAV,GAAqBH,MAArB;;AAEA,SAAKE,IAAL,CAAUE,MAAV,GAAmB,KAAKX,GAAL,CAASY,GAAT,EAAnB;AACA,SAAKH,IAAL,CAAUP,CAAV,GAAc,KAAKhB,OAAL,CAAagB,CAA3B;AACA,SAAKO,IAAL,CAAUN,CAAV,GAAc,KAAKjB,OAAL,CAAaiB,CAA3B;AACD,GApCM;;;AAsCP;AACAU,QAvCO,kBAuCCC,EAvCD,EAuCK;AACV,SAAKd,GAAL,GAAWvB,GAAGwB,EAAH,CAAM,KAAKnB,OAAL,CAAaoB,CAAb,GAAiB,KAAKhB,OAAL,CAAagB,CAApC,EAAuC,KAAKpB,OAAL,CAAaqB,CAAb,GAAiB,KAAKjB,OAAL,CAAaiB,CAArE,CAAX;AACA,QAAIC,IAAIC,KAAKC,KAAL,CAAW,KAAKN,GAAL,CAASG,CAApB,EAAuB,KAAKH,GAAL,CAASE,CAAhC,CAAR;AACA,QAAIK,SAASH,IAAI,GAAJ,GAAWC,KAAKG,EAA7B;AACAD,aAAS,MAAMA,MAAN,GAAe,EAAxB;AACA,SAAKE,IAAL,CAAUC,QAAV,GAAqBH,MAArB;;AAEA,SAAKE,IAAL,CAAUE,MAAV,GAAmB,KAAKX,GAAL,CAASY,GAAT,EAAnB;;AAEA,QAAIG,WAAW,KAAKN,IAAL,CAAUO,WAAV,CAAsB,CAAtB,CAAf;AACAD,aAASE,MAAT,CAAgB,CAAhB,EAAmBd,CAAnB,GAAuB,KAAKM,IAAL,CAAUE,MAAjC;AACAI,aAASE,MAAT,CAAgB,CAAhB,EAAmBd,CAAnB,GAAuB,KAAKM,IAAL,CAAUE,MAAjC;;AAEA,SAAKF,IAAL,CAAUP,CAAV,GAAc,KAAKhB,OAAL,CAAagB,CAA3B;AACA,SAAKO,IAAL,CAAUN,CAAV,GAAc,KAAKjB,OAAL,CAAaiB,CAA3B;AACD;AAtDM,CAAT","file":"Bind.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["/*\n * 主角链接的脚本\n */\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    Player1: {\n      type: cc.Node,\n      default: null\n    },\n\n    Player2: {\n      type: cc.Node,\n      default: null\n    }\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  // 初始化碰撞动画\n  onLoad () {\n    cc.director.getCollisionManager().enabled = true\n    var animComponent = this.getComponent(cc.Animation)\n    var animState = animComponent.play('bindAnim2')\n    animState.wrapMode = cc.WrapMode.Loop\n  },\n\n  // 初始化长度与角度\n  start () {\n    this.dir = cc.v2(this.Player1.x - this.Player2.x, this.Player1.y - this.Player2.y)\n    var r = Math.atan2(this.dir.y, this.dir.x)\n    var degree = r * 180 / (Math.PI)\n    degree = 360 - degree + 90\n    this.node.rotation = degree\n\n    this.node.height = this.dir.mag()\n    this.node.x = this.Player2.x\n    this.node.y = this.Player2.y\n  },\n\n  // 根据两主角位置,更新长度与角度\n  update (dt) {\n    this.dir = cc.v2(this.Player1.x - this.Player2.x, this.Player1.y - this.Player2.y)\n    var r = Math.atan2(this.dir.y, this.dir.x)\n    var degree = r * 180 / (Math.PI)\n    degree = 360 - degree + 90\n    this.node.rotation = degree\n\n    this.node.height = this.dir.mag()\n\n    var collider = this.node._components[3]\n    collider.points[2].y = this.node.height\n    collider.points[3].y = this.node.height\n\n    this.node.x = this.Player2.x\n    this.node.y = this.Player2.y\n  }\n})\n"]}